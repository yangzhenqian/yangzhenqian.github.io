"use strict";(self["webpackChunkgame"]=self["webpackChunkgame"]||[]).push([[320],{6320:function(t,e,i){i.r(e),i.d(e,{default:function(){return D}});var s=i(3396),a=i(7139),l=i(9242);const n=t=>((0,s.dD)("data-v-64b46ed8"),t=t(),(0,s.Cn)(),t),r={class:"link-game"},o={class:"game-header"},c={class:"game-info"},h={class:"score"},d={class:"timer"},m={class:"pairs"},u={class:"controls"},f=["disabled"],g=n((()=>(0,s._)("option",{value:"easy"},"简单 (6x6)",-1))),b=n((()=>(0,s._)("option",{value:"medium"},"中等 (8x8)",-1))),v=n((()=>(0,s._)("option",{value:"hard"},"困难 (10x10)",-1))),w=[g,b,v],y=["disabled"],p={class:"board-container"},S=["onClick"],C={key:0,class:"cell-content"},k={class:"game-footer"},_={class:"controls"},P=["disabled"],z={key:0,class:"best-scores"},T=n((()=>(0,s._)("h3",null,"最高分",-1)));function L(t,e,i,n,g,b){return(0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("div",o,[(0,s._)("div",c,[(0,s._)("div",h,"得分: "+(0,a.zw)(g.score),1),(0,s._)("div",d,"⏱️ "+(0,a.zw)(b.formatTime(g.timeLeft)),1),(0,s._)("div",m,"剩余配对: "+(0,a.zw)(b.remainingPairs),1)]),(0,s._)("div",u,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>g.difficulty=t),onChange:e[1]||(e[1]=(...t)=>b.newGame&&b.newGame(...t)),disabled:g.isPlaying},w,40,f),[[l.bM,g.difficulty]]),(0,s._)("button",{onClick:e[2]||(e[2]=(...t)=>b.newGame&&b.newGame(...t)),class:"new-game-btn"}," 新游戏 "),(0,s._)("button",{onClick:e[3]||(e[3]=(...t)=>b.stopGame&&b.stopGame(...t)),class:"stop-game-btn",disabled:!g.isPlaying}," 终止游戏 ",8,y)])]),(0,s._)("div",p,[(0,s._)("div",{class:"board",style:(0,a.j5)(b.boardStyle)},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(g.board,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:"row"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t,((t,i)=>((0,s.wg)(),(0,s.iD)("div",{key:i,class:(0,a.C_)(["cell",{selected:b.isSelected(e,i),matched:t.matched,hint:b.isHint(e,i),revealed:t.revealed}]),onClick:t=>b.handleClick(e,i)},[t.matched?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",C,(0,a.zw)(t.value),1))],10,S)))),128))])))),128))],4)]),(0,s._)("div",k,[(0,s._)("div",_,[(0,s._)("button",{onClick:e[4]||(e[4]=(...t)=>b.getHint&&b.getHint(...t)),disabled:!g.isPlaying||!b.canHint}," 提示 ("+(0,a.zw)(g.hints)+") ",9,P)]),g.bestScores[g.difficulty]?((0,s.wg)(),(0,s.iD)("div",z,[T,(0,s._)("p",null,(0,a.zw)(g.bestScores[g.difficulty]),1)])):(0,s.kq)("",!0)])])}i(7658);var M={name:"LinkGame",data(){return{difficulty:"easy",difficultySettings:{easy:{size:6,time:180,hints:5},medium:{size:8,time:300,hints:3},hard:{size:10,time:420,hints:2}},board:[],selected:null,score:0,timeLeft:0,timer:null,isPlaying:!1,hints:0,hintCells:[],bestScores:{easy:0,medium:0,hard:0}}},computed:{boardStyle(){const t=this.difficultySettings[this.difficulty].size;return{gridTemplateColumns:`repeat(${t}, 60px)`}},remainingPairs(){return this.board.flat().filter((t=>!t.matched)).length/2},canHint(){return this.hints>0&&this.remainingPairs>0}},mounted(){this.loadBestScores(),this.newGame()},beforeUnmount(){this.stopTimer()},methods:{newGame(){this.stopTimer(),this.selected=null,this.score=0,this.hintCells=[];const{size:t,time:e,hints:i}=this.difficultySettings[this.difficulty];this.timeLeft=e,this.hints=i,this.initializeBoard(t),this.startTimer(),this.isPlaying=!0},initializeBoard(t){const e=[],i=t*t/2;for(let a=0;a<i;a++){const t=String.fromCodePoint(127744+a);e.push(t,t)}for(let a=e.length-1;a>0;a--){const t=Math.floor(Math.random()*(a+1));[e[a],e[t]]=[e[t],e[a]]}this.board=[];let s=0;for(let a=0;a<t;a++){const i=[];for(let l=0;l<t;l++)i.push({value:e[s++],matched:!1,row:a,col:l});this.board.push(i)}},handleClick(t,e){if(!this.isPlaying||this.board[t][e].matched)return;const i=this.board[t][e];this.selected?this.selected!==i?this.canConnect(this.selected,i)?(this.matchCells(this.selected,i),this.selected=null,0===this.remainingPairs&&this.gameWon()):this.selected=i:this.selected=null:this.selected=i},canConnect(t,e){return t.value===e.value&&this.checkPath(t,e)},checkPath(t,e){if(this.checkStraightLine(t,e))return!0;const i=this.findCorners(t,e);return i.some((i=>this.checkStraightLine(t,i)&&this.checkStraightLine(i,e)))},checkStraightLine(t,e){if(t.row===e.row){const i=Math.min(t.col,e.col),s=Math.max(t.col,e.col);for(let e=i+1;e<s;e++)if(!this.board[t.row][e].matched)return!1;return!0}if(t.col===e.col){const i=Math.min(t.row,e.row),s=Math.max(t.row,e.row);for(let e=i+1;e<s;e++)if(!this.board[e][t.col].matched)return!1;return!0}return!1},findCorners(t,e){return[{row:t.row,col:e.col},{row:e.row,col:t.col}]},matchCells(t,e){t.matched=!0,e.matched=!0,this.score+=Math.ceil(this.timeLeft/10),this.playMatchSound()},getHint(){if(!this.canHint)return;this.hints--,this.hintCells=[];const t=this.board.flat().filter((t=>!t.matched));for(let e=0;e<t.length;e++)for(let i=e+1;i<t.length;i++)if(t[e].value===t[i].value&&this.canConnect(t[e],t[i]))return this.hintCells=[t[e],t[i]],void setTimeout((()=>{this.hintCells=[]}),2e3)},isSelected(t,e){const i=this.board[t][e];return this.selected===i},isHint(t,e){const i=this.board[t][e];return this.hintCells.includes(i)},startTimer(){this.timer=setInterval((()=>{this.timeLeft>0?this.timeLeft--:this.gameOver()}),1e3)},stopTimer(){this.timer&&(clearInterval(this.timer),this.timer=null)},gameWon(){this.stopTimer(),this.isPlaying=!1,this.score>this.bestScores[this.difficulty]&&(this.bestScores[this.difficulty]=this.score,this.saveBestScores()),alert("恭喜获胜！")},gameOver(){this.stopTimer(),this.isPlaying=!1,alert("游戏结束！")},formatTime(t){const e=Math.floor(t/60),i=t%60;return`${e}:${i.toString().padStart(2,"0")}`},loadBestScores(){const t=localStorage.getItem("link-game-scores");t&&(this.bestScores=JSON.parse(t))},saveBestScores(){localStorage.setItem("link-game-scores",JSON.stringify(this.bestScores))},playMatchSound(){},stopGame(){confirm("确定要终止当前游戏吗？")&&(this.stopTimer(),this.isPlaying=!1,this.selected=null,this.hintCells=[],this.board.forEach((t=>{t.forEach((t=>{t.matched||(t.revealed=!0)}))})),setTimeout((()=>{alert(`游戏已终止！\n最终得分：${this.score}`)}),100))}}},G=i(89);const H=(0,G.Z)(M,[["render",L],["__scopeId","data-v-64b46ed8"]]);var D=H}}]);