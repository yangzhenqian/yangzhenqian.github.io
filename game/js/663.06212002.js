"use strict";(self["webpackChunkgame"]=self["webpackChunkgame"]||[]).push([[663],{7663:function(e,i,t){t.r(i),t.d(i,{default:function(){return R}});var s=t(3396),l=t(7139),n=t(9242);const a=e=>((0,s.dD)("data-v-9bc9a89a"),e=e(),(0,s.Cn)(),e),r={class:"minesweeper"},o={class:"game-header"},d={class:"game-info"},h={class:"mine-counter"},c={class:"timer"},m={class:"controls"},g=["disabled"],f=a((()=>(0,s._)("option",{value:"beginner"},"初级 (9x9, 10雷)",-1))),u=a((()=>(0,s._)("option",{value:"intermediate"},"中级 (16x16, 40雷)",-1))),v=a((()=>(0,s._)("option",{value:"expert"},"高级 (16x30, 99雷)",-1))),b=[f,u,v],y={class:"board-container"},w=["onClick","onContextmenu"],C={class:"game-footer"},p=a((()=>(0,s._)("div",{class:"instructions"},[(0,s._)("p",null,"左键点击揭开方块，右键点击标记地雷"),(0,s._)("p",null,"数字表示周围地雷数量，避免踩到地雷即可获胜")],-1))),M={key:0,class:"stats"};function T(e,i,t,a,f,u){return(0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("div",o,[(0,s._)("div",d,[(0,s._)("div",h,"💣 "+(0,l.zw)(u.remainingMines),1),(0,s._)("div",c,"⏱️ "+(0,l.zw)(u.formatTime(f.time)),1)]),(0,s._)("div",m,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":i[0]||(i[0]=e=>f.difficulty=e),onChange:i[1]||(i[1]=(...e)=>u.newGame&&u.newGame(...e)),disabled:f.isPlaying},b,40,g),[[n.bM,f.difficulty]]),(0,s._)("button",{onClick:i[2]||(i[2]=(...e)=>u.newGame&&u.newGame(...e)),class:"new-game"},(0,l.zw)(u.gameEmoji),1)])]),(0,s._)("div",y,[(0,s._)("div",{class:"board",style:(0,l.j5)(u.boardStyle)},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(f.board,((e,i)=>((0,s.wg)(),(0,s.iD)("div",{key:i,class:"row"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:t,class:(0,l.C_)(["cell",u.getCellClass(e)]),onClick:e=>u.handleClick(i,t),onContextmenu:(0,n.iM)((e=>u.handleRightClick(i,t)),["prevent"])},(0,l.zw)(u.getCellContent(e)),43,w)))),128))])))),128))],4)]),(0,s._)("div",C,[p,f.bestTimes[f.difficulty]?((0,s.wg)(),(0,s.iD)("div",M,[(0,s._)("p",null,"最佳记录: "+(0,l.zw)(u.formatTime(f.bestTimes[f.difficulty])),1)])):(0,s.kq)("",!0)])])}var _={name:"MinesweeperGame",data(){return{difficulty:"beginner",difficultySettings:{beginner:{rows:9,cols:9,mines:10},intermediate:{rows:16,cols:16,mines:40},expert:{rows:16,cols:30,mines:99}},board:[],mineLocations:new Set,flaggedCells:new Set,revealedCells:new Set,gameOver:!1,isWinner:!1,time:0,timer:null,isPlaying:!1,bestTimes:{beginner:1/0,intermediate:1/0,expert:1/0}}},computed:{boardStyle(){const{cols:e}=this.difficultySettings[this.difficulty];return{gridTemplateColumns:`repeat(${e}, 30px)`}},remainingMines(){return this.difficultySettings[this.difficulty].mines-this.flaggedCells.size},gameEmoji(){return this.gameOver?this.isWinner?"😎":"😵":this.isPlaying?"🙂":"😊"}},mounted(){this.loadBestTimes(),this.newGame()},beforeUnmount(){this.stopTimer()},methods:{newGame(){this.stopTimer(),this.time=0,this.gameOver=!1,this.isWinner=!1,this.isPlaying=!1,this.mineLocations.clear(),this.flaggedCells.clear(),this.revealedCells.clear();const{rows:e,cols:i,mines:t}=this.difficultySettings[this.difficulty];this.initializeBoard(e,i),this.placeMines(t)},initializeBoard(e,i){this.board=Array(e).fill().map((()=>Array(i).fill().map((()=>({isMine:!1,isRevealed:!1,isFlagged:!1,neighborMines:0})))))},placeMines(e){const{rows:i,cols:t}=this.difficultySettings[this.difficulty];let s=0;while(s<e){const e=Math.floor(Math.random()*i),l=Math.floor(Math.random()*t),n=`${e},${l}`;this.mineLocations.has(n)||(this.mineLocations.add(n),this.board[e][l].isMine=!0,s++)}for(let l=0;l<i;l++)for(let e=0;e<t;e++)this.board[l][e].isMine||(this.board[l][e].neighborMines=this.countNeighborMines(l,e))},countNeighborMines(e,i){let t=0;for(let s=-1;s<=1;s++)for(let l=-1;l<=1;l++){const n=e+s,a=i+l;this.isValidCell(n,a)&&this.board[n][a].isMine&&t++}return t},handleClick(e,i){if(this.gameOver||this.board[e][i].isFlagged)return;this.isPlaying||(this.startTimer(),this.isPlaying=!0);const t=this.board[e][i];if(t.isMine)return this.revealAll(),this.gameOver=!0,void this.stopTimer();this.revealCell(e,i),this.checkWin()&&(this.gameOver=!0,this.isWinner=!0,this.stopTimer(),this.updateBestTime())},handleRightClick(e,i){if(this.gameOver||this.board[e][i].isRevealed)return;this.isPlaying||(this.startTimer(),this.isPlaying=!0);const t=this.board[e][i],s=`${e},${i}`;t.isFlagged=!t.isFlagged,t.isFlagged?this.flaggedCells.add(s):this.flaggedCells.delete(s)},revealCell(e,i){const t=this.board[e][i];if(!t.isRevealed&&!t.isFlagged&&(t.isRevealed=!0,this.revealedCells.add(`${e},${i}`),0===t.neighborMines))for(let s=-1;s<=1;s++)for(let t=-1;t<=1;t++){const l=e+s,n=i+t;this.isValidCell(l,n)&&this.revealCell(l,n)}},isValidCell(e,i){const{rows:t,cols:s}=this.difficultySettings[this.difficulty];return e>=0&&e<t&&i>=0&&i<s},revealAll(){const{rows:e,cols:i}=this.difficultySettings[this.difficulty];for(let t=0;t<e;t++)for(let e=0;e<i;e++)this.board[t][e].isRevealed=!0},checkWin(){const{rows:e,cols:i,mines:t}=this.difficultySettings[this.difficulty],s=e*i;return this.revealedCells.size===s-t},startTimer(){this.timer=setInterval((()=>{this.time++}),1e3)},stopTimer(){this.timer&&(clearInterval(this.timer),this.timer=null)},formatTime(e){const i=Math.floor(e/60),t=e%60;return`${i}:${t.toString().padStart(2,"0")}`},getCellClass(e){return{revealed:e.isRevealed,mine:e.isRevealed&&e.isMine,flagged:e.isFlagged}},getCellContent(e){return!e.isRevealed&&e.isFlagged?"🚩":e.isRevealed?e.isMine?"💣":e.neighborMines||"":""},updateBestTime(){this.time<this.bestTimes[this.difficulty]&&(this.bestTimes[this.difficulty]=this.time,localStorage.setItem("minesweeper-best-times",JSON.stringify(this.bestTimes)))},loadBestTimes(){const e=localStorage.getItem("minesweeper-best-times");e&&(this.bestTimes=JSON.parse(e))}}},S=t(89);const k=(0,S.Z)(_,[["render",T],["__scopeId","data-v-9bc9a89a"]]);var R=k}}]);