<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.27">
    <title>git | yangzhenqian</title><meta name="description" content="hello">
    <link rel="preload" href="/assets/js/runtime~app.30202cd1.js" as="script"><link rel="preload" href="/assets/css/styles.113454fc.css" as="style"><link rel="preload" href="/assets/js/567.ff38b5b2.js" as="script"><link rel="preload" href="/assets/js/app.bbee2ec2.js" as="script">
    <link rel="stylesheet" href="/assets/css/styles.113454fc.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name">yangzhenqian</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/" class="nav-link" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/" class="nav-link" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item">关于我</p><ul class=""><li><!--[--><a href="/my/" class="nav-link sidebar-item" aria-label="关于我"><!--[--><!--]--> 关于我 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">css高级</p><ul class=""><li><!--[--><a href="/css/render.html" class="nav-link sidebar-item" aria-label="浏览器渲染原理"><!--[--><!--]--> 浏览器渲染原理 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">js高级</p><ul class=""><li><!--[--><a href="/js-advanced/%E5%9F%BA%E7%A1%80.html" class="nav-link sidebar-item" aria-label="基础"><!--[--><!--]--> 基础 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/js-advanced/this.html" class="nav-link sidebar-item" aria-label="this 的理解"><!--[--><!--]--> this 的理解 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/js-advanced/%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF.html" class="nav-link sidebar-item" aria-label="事件循环机制（event loop）"><!--[--><!--]--> 事件循环机制（event loop） <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/js-advanced/%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98.html" class="nav-link sidebar-item" aria-label="浏览器缓存"><!--[--><!--]--> 浏览器缓存 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/js-advanced/%E5%8E%9F%E5%9E%8B%E4%B8%8E%E5%8E%9F%E5%9E%8B%E9%93%BE.html" class="nav-link sidebar-item" aria-label="原型与原型链"><!--[--><!--]--> 原型与原型链 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/js-advanced/%E7%BB%A7%E6%89%BF.html" class="nav-link sidebar-item" aria-label="继承"><!--[--><!--]--> 继承 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/js-advanced/%E5%B8%B8%E8%A7%81%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html" class="nav-link sidebar-item" aria-label="设计模式"><!--[--><!--]--> 设计模式 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/js-advanced/%E6%89%8B%E5%86%99%E6%BA%90%E7%A0%81.html" class="nav-link sidebar-item" aria-label="手写源码以及实现各种功能"><!--[--><!--]--> 手写源码以及实现各种功能 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">路由</p><ul class=""><li><!--[--><a href="/router/" class="nav-link sidebar-item" aria-label="前端路由"><!--[--><!--]--> 前端路由 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">vue</p><ul class=""><li><!--[--><a href="/vue/vue2.html" class="nav-link sidebar-item" aria-label="vue2"><!--[--><!--]--> vue2 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/vue/vue3.html" class="nav-link sidebar-item" aria-label="vue3"><!--[--><!--]--> vue3 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">react</p><ul class=""><li><!--[--><a href="/react/" class="nav-link sidebar-item" aria-label="介绍"><!--[--><!--]--> 介绍 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/react/react.html" class="nav-link sidebar-item" aria-label="正篇"><!--[--><!--]--> 正篇 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/react/hooks.html" class="nav-link sidebar-item" aria-label="hooks"><!--[--><!--]--> hooks <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">vite</p><ul class=""><li><!--[--><a href="/vite/" class="nav-link sidebar-item" aria-label="为什么选 vite"><!--[--><!--]--> 为什么选 vite <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/vite/debug.html" class="nav-link sidebar-item" aria-label="debug 源码"><!--[--><!--]--> debug 源码 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">node</p><ul class=""><li><!--[--><a href="/node/node.html" class="nav-link sidebar-item" aria-label="前言"><!--[--><!--]--> 前言 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">工程化</p><ul class=""><li><!--[--><a href="/engineering/webpack.html" class="nav-link sidebar-item" aria-label="webpack"><!--[--><!--]--> webpack <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/engineering/babel.html" class="nav-link sidebar-item" aria-label="babel"><!--[--><!--]--> babel <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/engineering/multirepo&amp;monorepo.html" class="nav-link sidebar-item" aria-label="multi-repo &amp; mono-repo"><!--[--><!--]--> multi-repo &amp; mono-repo <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">electron</p><ul class=""><li><!--[--><a href="/electron/electron.html" class="nav-link sidebar-item" aria-label="electron"><!--[--><!--]--> electron <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">threejs</p><ul class=""><li><!--[--><a href="/threejs/three.html" class="nav-link sidebar-item" aria-label="threejs"><!--[--><!--]--> threejs <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item active">git</p><ul class=""><li><!--[--><a aria-current="page" href="/git/git.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="git"><!--[--><!--]--> git <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/git/git.html#hash" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="hash"><!--[--><!--]--> hash <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/git/git.html#git-stash-暂存代码" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="git stash 暂存代码"><!--[--><!--]--> git stash 暂存代码 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/git/git.html#暂存常用命令" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="暂存常用命令"><!--[--><!--]--> 暂存常用命令 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/git/git.html#git-生命周期钩子函数" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="git 生命周期钩子函数"><!--[--><!--]--> git 生命周期钩子函数 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/git/git.html#本地钩子" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="本地钩子"><!--[--><!--]--> 本地钩子 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/git/git.html#远程钩子" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="远程钩子"><!--[--><!--]--> 远程钩子 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/git/git.html#git-cherry-pick-部分commit提交" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="git cherry-pick 部分commit提交"><!--[--><!--]--> git cherry-pick 部分commit提交 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/git/git.html#git-reset-回退版本" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="git reset 回退版本"><!--[--><!--]--> git reset 回退版本 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/git/git.html#git-revert-撤销中间某次commit提交" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="git revert 撤销中间某次commit提交"><!--[--><!--]--> git revert 撤销中间某次commit提交 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/git/git.html#git-rebase-变基" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="git rebase 变基"><!--[--><!--]--> git rebase 变基 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/git/git.html#多个commit合并" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="多个commit合并"><!--[--><!--]--> 多个commit合并 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/git/git.html#git-diff-查看commit更改" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="git diff 查看commit更改"><!--[--><!--]--> git diff 查看commit更改 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/git/git.html#git-补丁" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="git 补丁"><!--[--><!--]--> git 补丁 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/git/git.html#有冲突解决方案" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="有冲突解决方案"><!--[--><!--]--> 有冲突解决方案 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">技术网址</p><ul class=""><li><!--[--><a href="/technicalUrl/url.html" class="nav-link sidebar-item" aria-label="有用的网址"><!--[--><!--]--> 有用的网址 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">chrome</p><ul class=""><li><!--[--><a href="/chrome/plugin.html" class="nav-link sidebar-item" aria-label="谷歌扩展程序"><!--[--><!--]--> 谷歌扩展程序 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/chrome/chromePlugin.html" class="nav-link sidebar-item" aria-label="好用的chrome插件"><!--[--><!--]--> 好用的chrome插件 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">webWorker</p><ul class=""><li><!--[--><a href="/webWorker/webWorker.html" class="nav-link sidebar-item" aria-label="webWorker"><!--[--><!--]--> webWorker <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">通信</p><ul class=""><li><!--[--><a href="/http/http.html" class="nav-link sidebar-item" aria-label="http"><!--[--><!--]--> http <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/http/websocket.html" class="nav-link sidebar-item" aria-label="websocket"><!--[--><!--]--> websocket <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/http/eventSource.html" class="nav-link sidebar-item" aria-label="EventSource"><!--[--><!--]--> EventSource <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">正则</p><ul class=""><li><!--[--><a href="/zhengze/zhengze.html" class="nav-link sidebar-item" aria-label="正则"><!--[--><!--]--> 正则 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">前端代理</p><ul class=""><li><!--[--><a href="/httpProxy/chromeProxy.html" class="nav-link sidebar-item" aria-label="前端代理解决方案"><!--[--><!--]--> 前端代理解决方案 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">格式化代码</p><ul class=""><li><!--[--><a href="/formatCode/husky.html" class="nav-link sidebar-item" aria-label="husky"><!--[--><!--]--> husky <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">rust</p><ul class=""><li><!--[--><a href="/rust/rust.html" class="nav-link sidebar-item" aria-label="rust"><!--[--><!--]--> rust <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">开源组态库</p><ul class=""><li><!--[--><a href="/openSource/aj-report.html" class="nav-link sidebar-item" aria-label="aj-report"><!--[--><!--]--> aj-report <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/openSource/h5-dooring.html" class="nav-link sidebar-item" aria-label="h5-dooring"><!--[--><!--]--> h5-dooring <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">vscode</p><ul class=""><li><!--[--><a href="/vscode/plugins.html" class="nav-link sidebar-item" aria-label="插件"><!--[--><!--]--> 插件 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="git" tabindex="-1"><a class="header-anchor" href="#git" aria-hidden="true">#</a> git</h1><h3 id="hash" tabindex="-1"><a class="header-anchor" href="#hash" aria-hidden="true">#</a> hash</h3><p>通过git log 查看提交记录的hash值（只取前7位就可以） git log --graph 查看log结构图 <img src="/assets/img/1.57527aed.png" alt=""></p><h2 id="git-stash-暂存代码" tabindex="-1"><a class="header-anchor" href="#git-stash-暂存代码" aria-hidden="true">#</a> git stash 暂存代码</h2><p>在已经开发了一部分代码，发现分支存在问题需要回退到之前的版本，此时不想删除已开发的代码并回退到之前的版本</p><h3 id="暂存常用命令" tabindex="-1"><a class="header-anchor" href="#暂存常用命令" aria-hidden="true">#</a> 暂存常用命令</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>git stash <span class="token operator">||</span> git stash <span class="token operator">-</span>m <span class="token string">&quot;暂存说明&quot;</span> <span class="token operator">||</span> git stash save <span class="token string">&quot;暂存说明&quot;</span> <span class="token comment">//暂存文件</span>
git stash list <span class="token comment">// 查看暂存列表</span>
git stash pop stash@<span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span> <span class="token comment">//恢复暂存列表第一个暂存项，并删除暂存记录</span>
git stash apply stash@<span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span> <span class="token comment">//恢复暂存列表第一个暂存项，并保存暂存记录</span>
git stash push text<span class="token punctuation">.</span>txt main<span class="token punctuation">.</span>js <span class="token comment">//只缓存部分文件 多个文件用空格分隔</span>
git stash show stash@<span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span>  <span class="token comment">//查看某次暂存修改文件</span>
git stash show <span class="token operator">-</span>p stash@<span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span> <span class="token comment">//查看某次暂存所有的文件</span>
git stash drop stash@<span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span> <span class="token comment">//删除某条暂存</span>
git stash clear <span class="token comment">// 删除所有暂存</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="git-生命周期钩子函数" tabindex="-1"><a class="header-anchor" href="#git-生命周期钩子函数" aria-hidden="true">#</a> git 生命周期钩子函数</h2><ul><li><p>Git钩子是一组脚本，这些脚本对应着Git仓库中的特定事件，每一次事件发生时，钩子会被触发。这允许你可以定制化Git的内部行为，在开发周期中的关键点上触发执行定制化的脚本。</p></li><li><p>git钩子分为本地钩子 &amp; 服务端钩子</p></li><li><p>钩子脚本文件通常放置于项目目录的.git/hooks文件夹下。Git会在初始化项目时自动在这个文件夹下放置一些样例脚本。</p></li><li><p>在指定Git仓库中，钩子都是存在于本地的，它们不会跟随git clone命令被复制到新的仓库中去，所以任何对于当前仓库有权限的人都可以对其进行修改。这个特性对于为开发团队配置钩子产生了深远的影响。常用的如在.git存储钩子脚本，clone项目后手动复制到.git下；</p></li><li><p>本地钩子只会影响本地仓库。想必一定会记得每个开发者自己可以修改本地钩子，所以无法将其作为一种提交规范强制执行。不过它们可以让开发者能够更方便地遵循某种规范。</p></li><li><p>已经封装好的git钩子库 husky， line-staged等库</p></li></ul><h3 id="本地钩子" tabindex="-1"><a class="header-anchor" href="#本地钩子" aria-hidden="true">#</a> 本地钩子</h3><p>脚本放在本地，每位成员都可以随意修改；</p><h4 id="pre-commit" tabindex="-1"><a class="header-anchor" href="#pre-commit" aria-hidden="true">#</a> pre-commit</h4><p>每一次执行git commit命令时，在要求填入提交信息或者生成提交对象之前，pre-commit脚本会被触发执行； pre-commit 脚本退出不为0时，会终止提交流程; 可以执行一些eslint校验 || prettier做代码格式化校验；</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 1 为终止流程 0 为校验通过</span>
<span class="token keyword">if</span> <span class="token operator">!</span> git diff<span class="token operator">-</span>index <span class="token operator">--</span>check <span class="token operator">--</span>cached $against
then
    echo <span class="token string">&quot;pre-commit: Aborting commit due to whitespace errors&quot;</span>
    exit <span class="token number">1</span>
<span class="token keyword">else</span>
    echo <span class="token string">&quot;pre-commit: No whitespace errors :)&quot;</span>
    exit <span class="token number">0</span>
fi
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="prepare-commit-msg" tabindex="-1"><a class="header-anchor" href="#prepare-commit-msg" aria-hidden="true">#</a> prepare-commit-msg</h4><p>它会弹出含有提交信息的文本编辑器。在这一步可以用来修改squash或者merge命令自动生成的提交信息。 prepare-commit-msg钩子倒是允许用户在生成提交信息之后再来编辑它。钩子只是一个方便生成提交信息的脚本，不太适合作为强制提交信息规范。</p><p>prepare-commit-msg脚本接受的三个参数如下：</p><ol><li>储存提交信息的临时文件名称。你可以直接修改这个文件的内容来改变提交信息。</li><li>提交类型。可以是message（-m或者-F选项），template（-t选项），merge（如果本次提交时合并提交），或者squash（如果提交squash了其他提交）</li><li>关联提交的SHA1哈希值。仅当使用-c, -C, --amend选项时可传。</li></ol><h4 id="commit-msg" tabindex="-1"><a class="header-anchor" href="#commit-msg" aria-hidden="true">#</a> commit-msg</h4><p>可以传递的唯一参数是存储提交信息的文件名。可以在这一步做提交信息的校验 &amp; 提交信息不符合规范打回等操作；方便做统一提交信息规范的处理；</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>    <span class="token comment">// 不是fix开头抛出错误并退出流程</span>
    <span class="token keyword">if</span> content<span class="token punctuation">.</span><span class="token function">startswith</span><span class="token punctuation">(</span><span class="token string">&#39;fix&#39;</span><span class="token punctuation">)</span><span class="token operator">:</span>
        print <span class="token string">&quot;commit-msg: ERROR! The commit message must start with fix&quot;</span><span class="token punctuation">;</span>
        sys<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="post-commit" tabindex="-1"><a class="header-anchor" href="#post-commit" aria-hidden="true">#</a> post-Commit</h4><p>该脚本不需要传入参数，而且其退出状态码不会影响提交结果。可以通过git log -1 HEAD获取刚刚的提交内容 该脚本可以在commit完成之后进行消息通知，输出信息等操作；</p><h4 id="post-checkout" tabindex="-1"><a class="header-anchor" href="#post-checkout" aria-hidden="true">#</a> post-checkout</h4><p>每次执行git checkout命令成功检出一个分支或者提交时触发。用于在切换分支时做一些删除混乱文件的操作； 退出状态码对于流程无影响，可以对一些特殊的分支做单独的处理</p><p>接收三个参数</p><ol><li>当前的HEAD引用</li><li>新的HEAD引用</li><li>区分本次checkout是针对分支的还是针对文件的。选项值分别为1和0。</li></ol><h4 id="pre-rebase" tabindex="-1"><a class="header-anchor" href="#pre-rebase" aria-hidden="true">#</a> pre-rebase</h4><p>git rebase 之前运行的脚本</p><p>该钩子接受两个参数：上游分支，和进行rebase的分支。当rebase的分支为当前分支时，第二个参数为空。钩子脚本退出状态码非0时，退出rebase。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 禁止所有rebase操作</span>
echo <span class="token string">&quot;pre-rebase: Rebasing is dangerous. Don&#39;t do it.&quot;</span>
exit <span class="token number">1</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="远程钩子" tabindex="-1"><a class="header-anchor" href="#远程钩子" aria-hidden="true">#</a> 远程钩子</h3><p>服务端的钩子与本地钩子类似，只是他们存在于服务端仓库，这些钩子可以通过拒绝某些提交来强制执行提交规范。</p><h4 id="pre-receive-update" tabindex="-1"><a class="header-anchor" href="#pre-receive-update" aria-hidden="true">#</a> pre-receive &amp; update</h4><p>pre-receive 优先于 update执行，都在修改远程仓库前触发，无法控制开发者本地钩子规范，但可以通过该钩子拒绝不合适的提交；还可以做权限校验，判断推送人是否有权限往该分支上推送消息； pre-receive 与 update不同点，同时触发多个推送，pre-receive只执行一次，而update则执行多次，方便对每条提交进行单独校验；</p><h4 id="post-receive" tabindex="-1"><a class="header-anchor" href="#post-receive" aria-hidden="true">#</a> post-receive</h4><p>提交代码合入主仓库成功后触发，主要用于消息通知，发送邮件，重新编译等操作；</p><h2 id="git-cherry-pick-部分commit提交" tabindex="-1"><a class="header-anchor" href="#git-cherry-pick-部分commit提交" aria-hidden="true">#</a> git cherry-pick 部分commit提交</h2><p>当需要合并其他分支代码，可以直接使用merge，但如果不想全部合并，只想合并他的某几个commit提交，可以使用cherry-pick进行commit合并</p><p>merge合并最小单位是分支， cherry-pick 最小单位是commit记录</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 以下branch1为待合并的分支，branch2为要进行合并的分支</span>
git checkout branch1  <span class="token comment">//切换为branch1</span>
git log <span class="token comment">// 查看提交记录，并找到自己需要合并的commit记录 Hash值</span>

git checkout branch2 <span class="token comment">//切换为branch2</span>
git cherry<span class="token operator">-</span>pick hash <span class="token comment">//将branch1单个hash合并到branch2</span>

<span class="token comment">//一次合并多个commit提交,中间用空格间隔</span>
git cherry<span class="token operator">-</span>pick hash1 hash2

<span class="token comment">//进行连续一段commit记录进行合并,下面的命令从hash1到hash2的（左开右闭，不包含hash1）所有提交。</span>
<span class="token comment">//必须按照先后顺序，否则会失败，但不会报错</span>
git cherry<span class="token operator">-</span>pick hash1<span class="token punctuation">.</span><span class="token punctuation">.</span>hash2
<span class="token comment">//如果想要包含hash1,则增加^号，或选择他前一个hash值</span>
git cherry<span class="token operator">-</span>pick hash1<span class="token operator">^</span><span class="token punctuation">.</span><span class="token punctuation">.</span>hash2

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>git cherry-pick 常用配置项</p><ul><li>-e: 打开编辑器</li><li>-n: 只更新工作区&amp;暂存区，不产生新的提交记录</li><li>-x: 保留原来提交信息，方便后续排查提交怎么产生的</li><li>-s: 追加操作者账户名，方便追查谁进行的操作</li><li>-m: 如果原提交是两个分支的合并，则需要传入该参数，否则会失败</li></ul><p>冲突解决与merge一致</p><h2 id="git-reset-回退版本" tabindex="-1"><a class="header-anchor" href="#git-reset-回退版本" aria-hidden="true">#</a> git reset 回退版本</h2><p>当代码上传到暂存区，发现存在问题，需要重新修改进行提交</p><p>传参hash值均为想要回退的commit的上一条hash</p><h4 id="mixed" tabindex="-1"><a class="header-anchor" href="#mixed" aria-hidden="true">#</a> --mixed</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// mixed 作为reset默认值，可以不传，删除commit提交记录，工作区不受影响</span>
<span class="token comment">// 暂存区代码回退到未add状态，可修改后再次add, commit提交</span>
git reset <span class="token operator">--</span>mixed hash
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="soft" tabindex="-1"><a class="header-anchor" href="#soft" aria-hidden="true">#</a> --soft</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// soft删除commit提交记录，工作区不受影响</span>
<span class="token comment">// 暂存区代码回退到已add，未commit状态，可再次commit提交</span>
git reset <span class="token operator">--</span>soft hash
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="hard" tabindex="-1"><a class="header-anchor" href="#hard" aria-hidden="true">#</a> --hard</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// hard删除commit提交记录，工作区 &amp; 暂存区都会被删除</span>
git reset <span class="token operator">--</span>hard hash
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="git-revert-撤销中间某次commit提交" tabindex="-1"><a class="header-anchor" href="#git-revert-撤销中间某次commit提交" aria-hidden="true">#</a> git revert 撤销中间某次commit提交</h2><p>当提交了多次commit，此时想要把中间的commit内容撤销，又不影响后面的commit提交</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 进行某个commit的撤销，会将该次commit提交撤销到add的状态</span>
git revert <span class="token operator">-</span>n hash
<span class="token comment">// 重新commit提交</span>
git commit <span class="token operator">-</span>m <span class="token string">&#39;revert hash&#39;</span>
<span class="token comment">//此时暂存区已将revert的commit提交删除，并重新生成了hash</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="git-rebase-变基" tabindex="-1"><a class="header-anchor" href="#git-rebase-变基" aria-hidden="true">#</a> git rebase 变基</h2><p>merge 是将一个分支的更改合并到另一个分支中。它会创建一个新的合并提交，将两个分支的更改合并在一起。合并提交会保留每个分支的历史记录，并且可以在合并后的分支上看到合并的结果。</p><p>rebase 则是将目标分支的提交作为当前分支的基线；会更改提交历史，是提交记录看起来更加线性，缺点：会导致提交记录混乱，先后顺序更改，导致后续追查问题困难；</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 将目标分支的最新提交作为当前分支的基线</span>
git rebase 目标分支
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="多个commit合并" tabindex="-1"><a class="header-anchor" href="#多个commit合并" aria-hidden="true">#</a> 多个commit合并</h3><p>当开发一个需求完毕需要合并主分支时，需求存在多个commit提交记录，为了防止过多的commit提交导致主分支记录混乱，可以先将多个commit合并为一个commit，再进行merge</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>git log <span class="token comment">// 查看提交记录，选择需要合并的commit</span>
git rebase <span class="token operator">-</span>i hash <span class="token comment">// -i为不需要合并的hash，hash取值为需要合并的第一个提交记录</span>
git rebase <span class="token constant">HEAD</span><span class="token operator">~</span>n <span class="token comment">// n为前n个提交记录</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="进入vi编辑模式" tabindex="-1"><a class="header-anchor" href="#进入vi编辑模式" aria-hidden="true">#</a> 进入vi编辑模式</h5><p><img src="/assets/img/commit_merge_vi.7cc731ba.png" alt=""></p><h5 id="找到需要合并的commit将pick修改为s-squash-将本commit合并到前一个commit" tabindex="-1"><a class="header-anchor" href="#找到需要合并的commit将pick修改为s-squash-将本commit合并到前一个commit" aria-hidden="true">#</a> 找到需要合并的commit将pick修改为s || squash 将本commit合并到前一个commit</h5><p><img src="/assets/img/commit_merge_vi2.5443295e.png" alt=""></p><h4 id="配置项及作用" tabindex="-1"><a class="header-anchor" href="#配置项及作用" aria-hidden="true">#</a> 配置项及作用</h4><ul><li>pick: 保留commit</li><li>reword: 保留commit，但需修改message信息</li><li>edit： 保留commit，但需修改提交信息</li><li>squash: 将该commit合并到前一个commit</li><li>fixup: 将该commit合并到前一个commit，但不要保留该提交的注释信息</li><li>exec: 执行shell命令</li><li>drop: 删除commit</li></ul><h4 id="输入合并后的提交信息" tabindex="-1"><a class="header-anchor" href="#输入合并后的提交信息" aria-hidden="true">#</a> 输入合并后的提交信息</h4><p><img src="/assets/img/commit_message.5ffa8d56.png" alt=""></p><h4 id="合并成功后的log" tabindex="-1"><a class="header-anchor" href="#合并成功后的log" aria-hidden="true">#</a> 合并成功后的log</h4><p><img src="/assets/img/commit_merge-result.450941d9.png" alt=""></p><h4 id="直接运行-git-push-f-重新拉取代码会导致合并无效" tabindex="-1"><a class="header-anchor" href="#直接运行-git-push-f-重新拉取代码会导致合并无效" aria-hidden="true">#</a> 直接运行 git push -f，重新拉取代码会导致合并无效</h4><h4 id="rebase还可修改已经提交的commit信息等其他操作" tabindex="-1"><a class="header-anchor" href="#rebase还可修改已经提交的commit信息等其他操作" aria-hidden="true">#</a> rebase还可修改已经提交的commit信息等其他操作</h4><h4 id="如果这个过程中有操作错误-可以使用-git-rebase-abort来撤销修改-回到没有开始操作合并之前的状态。" tabindex="-1"><a class="header-anchor" href="#如果这个过程中有操作错误-可以使用-git-rebase-abort来撤销修改-回到没有开始操作合并之前的状态。" aria-hidden="true">#</a> 如果这个过程中有操作错误，可以使用 git rebase --abort来撤销修改，回到没有开始操作合并之前的状态。</h4><h3 id="git-diff-查看commit更改" tabindex="-1"><a class="header-anchor" href="#git-diff-查看commit更改" aria-hidden="true">#</a> git diff 查看commit更改</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>git diff <span class="token constant">HEAD</span><span class="token operator">~</span><span class="token number">3</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="git-补丁" tabindex="-1"><a class="header-anchor" href="#git-补丁" aria-hidden="true">#</a> git 补丁</h2><p>当需要进行代码迁移，codereview时，可以通过生成补丁的方式，将多个commit提交打入工作区内；</p><p>补丁分为 .diff文件 &amp; .patch文件</p><ul><li>.diff 文件只是记录文件改变的内容，不带有 commit 记录信息,多个 commit 可以合并成一个 diff 文件</li><li>.patch 文件带有记录文件改变的内容，也带有 commit 记录信息,每个 commit 对应一个 patch 文件。</li></ul><p>创建 .patch补丁</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token comment">// 创建对应hash之前的三个patch</span>
git format<span class="token operator">-</span>patch hash <span class="token operator">-</span><span class="token number">3</span>

<span class="token comment">// 创建某两次之间的所有patch</span>
git format<span class="token operator">-</span>patch hash1<span class="token punctuation">.</span><span class="token punctuation">.</span>hash2

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>创建 .diff补丁</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token comment">// 根据id创建diff文件,多个id用空格分隔</span>

git diff hash1 hash2 <span class="token operator">&gt;</span> filename<span class="token punctuation">.</span>diff

<span class="token comment">// 创建两个提交记录之间的 diff</span>

git diff hash1<span class="token punctuation">.</span><span class="token punctuation">.</span>hash2

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>检查补丁</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> <span class="token comment">// 检查diff文件</span>
git apply <span class="token operator">--</span>check filename<span class="token punctuation">.</span>diff

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>使用补丁</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 合入diff文件</span>
git apply filename<span class="token punctuation">.</span>diff

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="有冲突解决方案" tabindex="-1"><a class="header-anchor" href="#有冲突解决方案" aria-hidden="true">#</a> 有冲突解决方案</h3><p>有冲突会导致合入失败</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 自动合入无冲突的代码，同时生成.rej文件，保存未合入的内容</span>
git apply <span class="token operator">--</span>reject filename<span class="token punctuation">.</span>patch
<span class="token comment">// 根据rej文件解决冲突</span>
<span class="token comment">// 解决完毕进行add提交</span>
git add <span class="token punctuation">.</span>

<span class="token comment">//继续执行合入</span>

git am <span class="token operator">--</span>countinue

<span class="token comment">// 跳过冲突</span>

git am <span class="token operator">--</span>skip

<span class="token comment">// 回退</span>

git am <span class="token operator">--</span>abort
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">2023-6-28 6:42:02 ├F10: PM┤</span></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 1391795844@qq.com">yzq</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: zhenqian.yang@i-tage.com">yangzhenqian</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/assets/js/runtime~app.30202cd1.js" defer></script><script src="/assets/js/567.ff38b5b2.js" defer></script><script src="/assets/js/app.bbee2ec2.js" defer></script>
  </body>
</html>
