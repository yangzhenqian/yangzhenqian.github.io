<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.27">
    <title>浏览器缓存 | yangzhenqian</title><meta name="description" content="hello">
    <link rel="preload" href="/assets/js/runtime~app.266fa5a8.js" as="script"><link rel="preload" href="/assets/css/styles.113454fc.css" as="style"><link rel="preload" href="/assets/js/567.ff38b5b2.js" as="script"><link rel="preload" href="/assets/js/app.ed79e6a1.js" as="script">
    <link rel="stylesheet" href="/assets/css/styles.113454fc.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name">yangzhenqian</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/" class="nav-link" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/" class="nav-link" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item">关于我</p><ul class=""><li><!--[--><a href="/my/" class="nav-link sidebar-item" aria-label="关于我"><!--[--><!--]--> 关于我 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">css高级</p><ul class=""><li><!--[--><a href="/css/render.html" class="nav-link sidebar-item" aria-label="浏览器渲染原理"><!--[--><!--]--> 浏览器渲染原理 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item active">js高级</p><ul class=""><li><!--[--><a href="/js-advanced/%E5%9F%BA%E7%A1%80.html" class="nav-link sidebar-item" aria-label="基础"><!--[--><!--]--> 基础 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/js-advanced/this.html" class="nav-link sidebar-item" aria-label="this 的理解"><!--[--><!--]--> this 的理解 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/js-advanced/%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF.html" class="nav-link sidebar-item" aria-label="事件循环机制（event loop）"><!--[--><!--]--> 事件循环机制（event loop） <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/js-advanced/%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="浏览器缓存"><!--[--><!--]--> 浏览器缓存 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/js-advanced/%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98.html#协商缓存" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="协商缓存"><!--[--><!--]--> 协商缓存 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/js-advanced/%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98.html#强缓存" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="强缓存"><!--[--><!--]--> 强缓存 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a href="/js-advanced/%E5%8E%9F%E5%9E%8B%E4%B8%8E%E5%8E%9F%E5%9E%8B%E9%93%BE.html" class="nav-link sidebar-item" aria-label="原型与原型链"><!--[--><!--]--> 原型与原型链 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/js-advanced/%E7%BB%A7%E6%89%BF.html" class="nav-link sidebar-item" aria-label="继承"><!--[--><!--]--> 继承 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/js-advanced/%E5%B8%B8%E8%A7%81%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html" class="nav-link sidebar-item" aria-label="设计模式"><!--[--><!--]--> 设计模式 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/js-advanced/%E6%89%8B%E5%86%99%E6%BA%90%E7%A0%81.html" class="nav-link sidebar-item" aria-label="手写源码以及实现各种功能"><!--[--><!--]--> 手写源码以及实现各种功能 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">路由</p><ul class=""><li><!--[--><a href="/router/" class="nav-link sidebar-item" aria-label="前端路由"><!--[--><!--]--> 前端路由 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">vue</p><ul class=""><li><!--[--><a href="/vue/vue2.html" class="nav-link sidebar-item" aria-label="vue2"><!--[--><!--]--> vue2 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/vue/vue3.html" class="nav-link sidebar-item" aria-label="vue3"><!--[--><!--]--> vue3 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">react</p><ul class=""><li><!--[--><a href="/react/" class="nav-link sidebar-item" aria-label="介绍"><!--[--><!--]--> 介绍 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/react/react.html" class="nav-link sidebar-item" aria-label="正篇"><!--[--><!--]--> 正篇 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/react/hooks.html" class="nav-link sidebar-item" aria-label="hooks"><!--[--><!--]--> hooks <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">vite</p><ul class=""><li><!--[--><a href="/vite/" class="nav-link sidebar-item" aria-label="为什么选 vite"><!--[--><!--]--> 为什么选 vite <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/vite/debug.html" class="nav-link sidebar-item" aria-label="debug 源码"><!--[--><!--]--> debug 源码 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">node</p><ul class=""><li><!--[--><a href="/node/node.html" class="nav-link sidebar-item" aria-label="前言"><!--[--><!--]--> 前言 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">工程化</p><ul class=""><li><!--[--><a href="/engineering/webpack.html" class="nav-link sidebar-item" aria-label="webpack"><!--[--><!--]--> webpack <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/engineering/babel.html" class="nav-link sidebar-item" aria-label="babel"><!--[--><!--]--> babel <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/engineering/multirepo&amp;monorepo.html" class="nav-link sidebar-item" aria-label="multi-repo &amp; mono-repo"><!--[--><!--]--> multi-repo &amp; mono-repo <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">electron</p><ul class=""><li><!--[--><a href="/electron/electron.html" class="nav-link sidebar-item" aria-label="electron"><!--[--><!--]--> electron <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">threejs</p><ul class=""><li><!--[--><a href="/threejs/three.html" class="nav-link sidebar-item" aria-label="threejs"><!--[--><!--]--> threejs <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">git</p><ul class=""><li><!--[--><a href="/git/git.html" class="nav-link sidebar-item" aria-label="git"><!--[--><!--]--> git <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">技术网址</p><ul class=""><li><!--[--><a href="/technicalUrl/url.html" class="nav-link sidebar-item" aria-label="有用的网址"><!--[--><!--]--> 有用的网址 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">chrome</p><ul class=""><li><!--[--><a href="/chrome/plugin.html" class="nav-link sidebar-item" aria-label="谷歌扩展程序"><!--[--><!--]--> 谷歌扩展程序 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/chrome/chromePlugin.html" class="nav-link sidebar-item" aria-label="好用的chrome插件"><!--[--><!--]--> 好用的chrome插件 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">webWorker</p><ul class=""><li><!--[--><a href="/webWorker/webWorker.html" class="nav-link sidebar-item" aria-label="webWorker"><!--[--><!--]--> webWorker <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">通信</p><ul class=""><li><!--[--><a href="/http/http.html" class="nav-link sidebar-item" aria-label="http"><!--[--><!--]--> http <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/http/websocket.html" class="nav-link sidebar-item" aria-label="websocket"><!--[--><!--]--> websocket <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/http/eventSource.html" class="nav-link sidebar-item" aria-label="EventSource"><!--[--><!--]--> EventSource <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">正则</p><ul class=""><li><!--[--><a href="/zhengze/zhengze.html" class="nav-link sidebar-item" aria-label="正则"><!--[--><!--]--> 正则 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">前端代理</p><ul class=""><li><!--[--><a href="/httpProxy/chromeProxy.html" class="nav-link sidebar-item" aria-label="前端代理解决方案"><!--[--><!--]--> 前端代理解决方案 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">格式化代码</p><ul class=""><li><!--[--><a href="/formatCode/husky.html" class="nav-link sidebar-item" aria-label="husky"><!--[--><!--]--> husky <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">rust</p><ul class=""><li><!--[--><a href="/rust/rust.html" class="nav-link sidebar-item" aria-label="rust"><!--[--><!--]--> rust <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">开源组态库</p><ul class=""><li><!--[--><a href="/openSource/aj-report.html" class="nav-link sidebar-item" aria-label="aj-report"><!--[--><!--]--> aj-report <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/openSource/h5-dooring.html" class="nav-link sidebar-item" aria-label="h5-dooring"><!--[--><!--]--> h5-dooring <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">vscode</p><ul class=""><li><!--[--><a href="/vscode/plugins.html" class="nav-link sidebar-item" aria-label="插件"><!--[--><!--]--> 插件 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="浏览器缓存" tabindex="-1"><a class="header-anchor" href="#浏览器缓存" aria-hidden="true">#</a> 浏览器缓存</h1><p>浏览器缓存分为协商缓存和强缓存</p><h2 id="协商缓存" tabindex="-1"><a class="header-anchor" href="#协商缓存" aria-hidden="true">#</a> 协商缓存</h2><p>浏览器强缓存失效或者请求头中设置了不走强缓存，并且请求头中设置了<code>If-Modified-Since</code>或<code>If-None-Match</code>时，会将这两个值发送到服务器去验证是否命中协商缓存，如果命中，会返回<code>304</code>状态,加载浏览器缓存，并且响应头会设置<code>Last-Modified</code>或<code>Etag</code>属性</p><p><code>http 1.1 优先级高</code></p><h5 id="if-modified-since-last-modified-http-1-0" tabindex="-1"><a class="header-anchor" href="#if-modified-since-last-modified-http-1-0" aria-hidden="true">#</a> If-Modified-Since/Last-Modified （http 1.0 ）</h5><ul><li>值为时间</li><li>服务端根据文件最后一次修改时间和 If-Modified-Since 的值进行比较，若相等则命中协商缓存，返回 304 状态，加载浏览器缓存</li></ul><h5 id="if-none-match-etag-http-1-1" tabindex="-1"><a class="header-anchor" href="#if-none-match-etag-http-1-1" aria-hidden="true">#</a> If-None-Match/Etag （http 1.1）</h5><ul><li>值为一串 hash 码，当服务端的文件发生变化时，它的 hash 码也会随之改变</li><li>通过请求头中的 If-None-Match 和和当前文件的 hash 值进行比较，若相等则命中协商缓存，返回 304 状态，加载浏览器缓存</li></ul><h2 id="强缓存" tabindex="-1"><a class="header-anchor" href="#强缓存" aria-hidden="true">#</a> 强缓存</h2><ul><li>不需要发送请求到服务器，直接读取浏览器缓存</li><li>http 状态码为 200</li><li>强缓存分为 <code>disk cache</code> 和 <code>memory cache</code>，存放的位置由浏览器控制</li><li>是否强缓存由 <code>Expires</code>、<code>Cache-control</code> 和 <code>Program</code> 三个 header 属性来控制</li></ul><h5 id="expires" tabindex="-1"><a class="header-anchor" href="#expires" aria-hidden="true">#</a> Expires</h5><ul><li>值为 http 日期</li><li>在浏览器发起请求前，会根据系统时间和 Expires 的值进行比较 <ul><li>若系统时间超过了 Expires 的值，则缓存失效</li></ul></li><li>修改系统时间会导致缓存有效期不准，所有<code>优先级最低</code></li></ul><h5 id="cache-control" tabindex="-1"><a class="header-anchor" href="#cache-control" aria-hidden="true">#</a> Cache-Control</h5><p><code>http 1.1</code> 新增属性</p><ul><li>max-age</li></ul><p>单位为秒，是距离发起的时间的秒数，超出间隔秒数则缓存失效</p><ul><li>no-cache</li></ul><p>不使用强缓存，需要与服务器验证是否新鲜(即使用协商缓存)</p><ul><li>no-store</li></ul><p>禁止使用缓存（包括协商缓存），每次都向服务器请求最新的资源</p><ul><li>private</li></ul><p>专用于个人的缓存，中间代理、cdn 等不能缓存此相应</p><ul><li>public</li></ul><p>缓存可以被中间代理、cdn 等缓存</p><ul><li>must-revalidate</li></ul><p>在缓存过期前可以使用，过期后必须向服务器验证</p><h5 id="program" tabindex="-1"><a class="header-anchor" href="#program" aria-hidden="true">#</a> Program</h5><p>只有一个属性值：no-cache，效果和 Cache-Control 中 no-cache 效果一致,不使用强缓存，需要与服务器验证是否新鲜，在这 3 个中 header 中<code>优先级最高</code></p><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">2023-5-18 2:46:04 ├F10: PM┤</span></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: zhenqian.yang@i-tage.com">yangzhenqian</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"> ← <a href="/js-advanced/%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF.html" class="nav-link" aria-label="事件循环机制（event loop）"><!--[--><!--]--> 事件循环机制（event loop） <!--[--><!--]--></a></span><span class="next"><a href="/js-advanced/%E5%8E%9F%E5%9E%8B%E4%B8%8E%E5%8E%9F%E5%9E%8B%E9%93%BE.html" class="nav-link" aria-label="原型与原型链"><!--[--><!--]--> 原型与原型链 <!--[--><!--]--></a> → </span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/assets/js/runtime~app.266fa5a8.js" defer></script><script src="/assets/js/567.ff38b5b2.js" defer></script><script src="/assets/js/app.ed79e6a1.js" defer></script>
  </body>
</html>
